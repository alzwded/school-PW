<html>
<head>
<style>
	html, body {
		height:100%;
	}
	.widget {
		position:absolute;
		display:block;
		width:300px;
		height:300px;
		background-color:#C88;
		border:solid 2px black;
	}
	.title {
		display:block;
		width:100%;
		background-color:blue;
		height: 20px;
		color:white;
	}
	.closeButton, .moveButton {
		text-align:center;
		display:block;
		width:20px;
		height:20px;
		cursor:default;
	}
	.closeButton {
		float:left;
	}
	.moveButton {
		float:right;
	}
	.closeButton:hover {
		background-color:cyan;
	}
	.moveButton:hover {
		background-color:cyan;
	}
	.moveButtonClicked {
		background-color:red;
	}
	.overlay {
		width:100%;
		height:100%;
		position:absolute;
		left:0px;
		top:0px;
		visibility:hidden;
		z-index:-999;
	}
</style>
</head>
<body onmousemove="mouseMove(event)">
	<div id="win1" class="widget" style="left:100px; top:100px;">
		<span class="title">
			widget
			<span class="closeButton">-</span>
			<span id="mb" class="moveButton" onclick="move(event)">m</span>
		</span>
		window contentlol
	</div>
<script>
var moving = false
var initialX = 0
var initialY = 0
function move(e) {
	var d = document.getElementById("win1")
	if(!moving) {
		document.getElementById("mb").style.className = "moveButtonClicked"
		moving = true
		initialX = e.pageX
		initialY = e.pageY
	} else {
		moving = false
		document.getElementById("mb").style.className = "moveButton"
	}
}
function mouseMove(e) {
	if(moving) {
		var x = e.pageX
		var y = e.pageY
		var dx = x - initialX
		var dy = y - initialY

		var d = document.getElementById("win1")
		var left = new Number(d.style.getPropertyValue("left").replace("px", ""))
		left += dx
		d.style.left = left + "px"
		var top = new Number(d.style.getPropertyValue("top").replace("px", ""))
		top += dy
		d.style.top = top + "px"

		initialX = x
		initialY = y
	}
}
</script>

</body>
</html>
